<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>

<body>
    <p id="para">NO DATA!!</p>
    <button id="button">
        <span>
            Get Data
        </span>
        <span>

            <div id="outside">
                <div id="inside"></div>
            </div>
        </span>
    </button>
    <ul id="lists"></ul>
</body>
<script>
    const URL = "https://jsonplaceholder.typicode.com/todo1s";
    const para = document.getElementById("para");
    const button = document.getElementById("button");
    const outside = document.getElementById("outside");
    const inside = document.getElementById("inside");
    const lists = document.getElementById("lists");

    button.addEventListener("click", (e) => {
        e.preventDefault();


        async function getEndData(URL) {
            try {
                async function getData(URL) {
                    const data = await fetch(URL);
                    const jsonData = await data.json();
                    return jsonData;
                }

                async function endData(URL) {
                    para.style.display = "none";
                    outside.classList.add("loader-container");
                    inside.classList.add("loader");
                    const res = await getData(URL);
                    para.innerText = `Total Results: ${res.length}`;
                    para.style.display = "block";
                    outside.classList.remove("loader-container");
                    inside.classList.remove("loader");
                    button.innerText = "Data Fetched";
                    console.log(res);
                    for (let i = 0; i < res.length; i++) {
                        const listItem = res[i].title;
                        const list = document.createElement("li");
                        list.innerText = listItem;
                        lists.appendChild(list);
                    }
                }

                endData(URL);
            } catch {
                para.innerText = "Failed to fetch!!"
            }
            finally {
                button.disabled = "true";
            }
        }

        getEndData(URL);


    })


</script>

</html>